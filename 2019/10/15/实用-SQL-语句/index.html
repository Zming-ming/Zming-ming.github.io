<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="author" content="明明～">
    
    <meta name="description" content="Zming-ming">
    
    
    
    
    
    
    <title>实用 SQL 语句 | 明明～</title>
    <link href="”https://zming-ming.github.io“" rel="”prefetch”">

    <link rel="stylesheet" href="/css/bootstrap.min.css">
<link rel="stylesheet" href="/css/aos.css">
<link rel="stylesheet" href="/css/style.css">
    <script src="/js/jquery.min.js"></script>
    <script src="/js/bootstrap.min.js"></script>
    <script src="/js/aos.js"></script>
    <script src="/js/highslide/highslide-full.min.js"></script>
    <link rel="stylesheet" href="/js/highslide/highslide.css">
    <style type="text/css">
        @media (max-width: 768px) {
            body {
                background-color: #f0f0f0;
                background: url('/imgs/xsbg.gif');
                background-attachment: fixed;
            }
        }
    </style>
    
    <script src="//cdn1.lncld.net/static/js/3.4.2/av-min.js"></script>
    <script>
      AV.init({
        appId: 'QMjuuJU9D2ss1vdmFKmmq2jv-gzGzoHsz',
        appKey: 'ExPYzACyKFnWERdWAp46xdjI'
      })
    </script>
    
    <!--<script type="text/javascript">
      if (document.images) {
        var avatar = new Image();
        avatar.src = '/imgs/avatar.jpg'
        var previews = 'background1.jpg,background2.jpg,background3.jpg,background4.jpg,background5.jpg,background6.jpg,background7.jpg,background8.jpg,background9.jpg,background10.jpg,background11.jpg,background12.jpg,background13.jpg,background14.jpg,background15.jpg'.split(',')
        var previewsPreLoad = []
        for(var i = 0; i < length; i++) {
          previewsPreLoad.push(new Image())
          previewsPreLoad[previewsPreLoad.length - 1].src = '/imgs/preview' + previews[i]
        }
      }
    </script>-->
</head></html>
<body>
    <!-- 背景轮播图功能 -->
    <section class="hidden-xs">
    <ul class="cb-slideshow">
        <li><span>天若</span></li>
        <li><span>有情</span></li>
        <li><span>天亦老</span></li>
        <li><span>我为</span></li>
        <li><span>长者</span></li>
        <li><span>续一秒</span></li>
    </ul>
</section>
    <!-- 欧尼酱功能, 谁用谁知道 -->
    
    <div class="gal-menu gal-dropdown">
    <div class="circle" id="gal">
        <div class="ring">
            <a href="https://zming-ming.github.io" class="menuItem" style="left: 50%; top: 15%;">首页</a>
            
            <a class="menuItem" style="left: 80.3109%; top: 32.5%;">下一页</a>
            
            <a href="/archives" class="menuItem" style="left: 80.3109%; top: 67.5%;">归档</a>
            <a href="/about" class="menuItem" style="left: 50%; top: 85%;">关于</a>
            <a href="/categories" class="menuItem" style="left: 19.6891%; top: 67.5%;">分类</a>
            
            <a class="menuItem" style="left: 19.6891%; top: 32.5%;">上一页</a>
            
        </div>
        <audio id="audio" src="/imgs/oni.mp3"></audio>
    </div>
</div>
    
    <header class="navbar navbar-inverse" id="gal-header">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".bs-navbar-collapse" aria-expanded="false">
                <span class="fa fa-lg fa-reorder"></span>
            </button>
            <a href="https://zming-ming.github.io">
                
                <style>
                    #gal-header .navbar-brand {
                        height: 54px;
                        line-height: 24px;
                        font-size: 28px;
                        opacity: 1;
                        background-color: rgba(0,0,0,0);
                        text-shadow: 0 0 5px #fff,0 0 10px #fff,0 0 15px #fff,0 0 20px #228DFF,0 0 35px #228DFF,0 0 40px #228DFF,0 0 50px #228DFF,0 0 75px #228DFF;
                    }
                </style>
                <!-- 这里使用文字(navbar_text or config.title) -->
                <div class="navbar-brand">明明～</div>
                
            </a>
        </div>
        <div class="collapse navbar-collapse bs-navbar-collapse">
            <ul class="nav navbar-nav" id="menu-gal">
                
                
                <li class>
                    <a href="/">
                        <i class="fa fa-home"></i>首页
                    </a>
                </li>
                
                
                
                <li class>
                    <a href="/archives">
                        <i class="fa fa-archive"></i>归档
                    </a>
                </li>
                
                
                
                
                <li class="dropdown">
                    <!-- TODO 添加hover dropdown效果 -->
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" data-hover="dropdown">
                        <i class="fa fa-list"></i>分类
                    </a>
                    <ul class="dropdown-menu">
                        
                        
                        <li>
                            <a href="/categories/PHP/">PHP</a>
                        </li>
                        
                        <li>
                            <a href="/categories/服务器/">服务器</a>
                        </li>
                        
                        <li>
                            <a href="/categories/前端/">前端</a>
                        </li>
                        
                        
                        <li>
                            <a href="/categories">...</a>
                        </li>
                        
                        
                    </ul>
                </li>
                
                
                
                
                
                <li class="dropdown">
                    <!-- TODO 添加hover dropdown效果 -->
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" data-hover="dropdown">
                        <i class="fa fa-tags"></i>标签
                    </a>
                    <ul class="dropdown-menu">
                        
                        
                        <li>
                            <a href="/tags/Excel/">Excel</a>
                        </li>
                        
                        <li>
                            <a href="/tags/Laravel/">Laravel</a>
                        </li>
                        
                        <li>
                            <a href="/tags/markdown/">markdown</a>
                        </li>
                        
                        
                        <li>
                            <a href="/tags">...</a>
                        </li>
                        
                        
                    </ul>
                </li>
                
                
                
                
                <li class>
                    <a href="/about">
                        <i class="fa fa-user"></i>关于我
                    </a>
                </li>
                
                
            </ul>
        </div>
    </div>
</header>
    <div id="gal-body">
        <div class="container">
            <div class="row">
                <div class="col-md-8 gal-right" id="mainstay">
                    
<article class="article well article-body" id="article">
    <div class="breadcrumb">
        <i class="fa fa-home"></i>
        <a href="https://zming-ming.github.io">明明～</a>
        >
        <span>实用 SQL 语句</span>
    </div>
    <!-- 大型设备详细文章 -->
    <div class="hidden-xs">
        <div class="title-article">
            <h1>
                <a href="/2019/10/15/实用-SQL-语句/">实用 SQL 语句</a>
            </h1>
        </div>
        <div class="tag-article">
            
            <span class="label label-gal">
                <i class="fa fa-tags"></i>
                
                <a href="/tags/MySql/">MySql</a>
                
            </span>
            
            <span class="label label-gal">
                <i class="fa fa-calendar"></i> 2019-10-15
            </span>
            
            <span class="label label-gal">
                <i class="fa fa-eye"></i>
            </span>
            
        </div>
    </div>
    <!-- 小型设备详细文章 -->
    <div class="visible-xs">
        <center>
            <div class="title-article">
                <h4>
                    <a href="/2019/10/15/实用-SQL-语句/">实用 SQL 语句</a>
                </h4>
            </div>
            <p>
                <i class="fa fa-calendar"></i> 2019-10-15
            </p>
            <p>
                
                <i class="fa fa-tags"></i>
                
                <a href="/tags/MySql/">MySql</a>
                
                
                
                <i class="fa fa-eye"></i>
                
            </p>
        </center>
    </div>
    <div class="content-article">
        <h2 id="1-创建"><a href="#1-创建" class="headerlink" title="1. 创建"></a>1. 创建</h2><h4 id="1-1-创建数据库"><a href="#1-1-创建数据库" class="headerlink" title="1.1 创建数据库"></a>1.1 创建数据库</h4><h5 id="语法：create-database-db-name"><a href="#语法：create-database-db-name" class="headerlink" title="语法：create database db_name"></a>语法：<code>create database db_name</code></h5><h5 id="示例：创建应用数据库-awesome-app"><a href="#示例：创建应用数据库-awesome-app" class="headerlink" title="示例：创建应用数据库 awesome_app"></a>示例：创建应用数据库 <code>awesome_app</code></h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">create database `awesome_app`</span><br></pre></td></tr></table></figure>

<h4 id="1-2-创建表格"><a href="#1-2-创建表格" class="headerlink" title="1.2 创建表格"></a>1.2 创建表格</h4><h5 id="语法：create-table-table-name-columns"><a href="#语法：create-table-table-name-columns" class="headerlink" title="语法：create table table_name ( ... columns )"></a>语法：<code>create table table_name ( ... columns )</code></h5><h5 id="示例：创建用户表-users"><a href="#示例：创建用户表-users" class="headerlink" title="示例：创建用户表 users"></a>示例：创建用户表 <code>users</code></h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">create table `users`</span><br><span class="line">(</span><br><span class="line">    `id` int,</span><br><span class="line">    `name` char(10),</span><br><span class="line">    `avatar` varchar(300),</span><br><span class="line">    `regtime` date</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<h4 id="1-3-创建索引"><a href="#1-3-创建索引" class="headerlink" title="1.3 创建索引"></a>1.3 创建索引</h4><h5 id="语法：create-index-index-name-on-table-name-column-name"><a href="#语法：create-index-index-name-on-table-name-column-name" class="headerlink" title="语法：create index index_name on table_name (column_name)"></a>语法：<code>create index index_name on table_name (column_name)</code></h5><h5 id="示例：为用户-id-创建索引-idx-id"><a href="#示例：为用户-id-创建索引-idx-id" class="headerlink" title="示例：为用户 id 创建索引 idx_id"></a>示例：为用户 id 创建索引 idx_id</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">create index `idx_id` on `users` (`id`)</span><br><span class="line">/* 创建唯一索引 */</span><br><span class="line">create unique index `idx_id` on `users` (`id`)</span><br></pre></td></tr></table></figure>

<h4 id="1-4-为已存在的列创建主键"><a href="#1-4-为已存在的列创建主键" class="headerlink" title="1.4 为已存在的列创建主键"></a>1.4 为已存在的列创建主键</h4><blockquote>
<p>更常用的方式是在创建表语句所有列定义的后面添加一行 primary key (column_name)。</p>
</blockquote>
<h5 id="语法：alter-table-table-name-add-primary-key-column-name"><a href="#语法：alter-table-table-name-add-primary-key-column-name" class="headerlink" title="语法：alter table table_name add primary key (column_name)"></a>语法：<code>alter table table_name add primary key (column_name)</code></h5><h5 id="示例：将用户-id-设为主键"><a href="#示例：将用户-id-设为主键" class="headerlink" title="示例：将用户 id 设为主键"></a>示例：将用户 id 设为主键</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter table users add primary key (`id`)</span><br></pre></td></tr></table></figure>

<h4 id="1-5-为已存在的列创建自增约束"><a href="#1-5-为已存在的列创建自增约束" class="headerlink" title="1.5 为已存在的列创建自增约束"></a>1.5 为已存在的列创建自增约束</h4><blockquote>
<p>更常用的方式是在创建表语句中添加自增列 id int not null auto_increment。</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter table `users` modify `id` int not null auto_increment</span><br></pre></td></tr></table></figure>

<h2 id="2-插入"><a href="#2-插入" class="headerlink" title="2. 插入"></a>2. 插入</h2><h5 id="语法："><a href="#语法：" class="headerlink" title="语法："></a>语法：</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">insert into table_name values (value1, value2, ...)</span><br><span class="line">insert into table_name (column1, column2, ...) values (value1, value2, ...)</span><br></pre></td></tr></table></figure>

<h5 id="示例：新增注册用户"><a href="#示例：新增注册用户" class="headerlink" title="示例：新增注册用户"></a>示例：新增注册用户</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">insert into `users` values (1, &apos;ken&apos;, &apos;http://cdn.awesome_app.com/path/to/xxx/avatar1.jpg&apos;, curdate())</span><br><span class="line">/* 指定列插入 */</span><br><span class="line">insert into `users` (`name`, `avatar`) values (&apos;bill&apos;, &apos;http://cdn.awesome_app.com/path/to/xxx/avatar2.jpg&apos;)</span><br></pre></td></tr></table></figure>

<h2 id="3-修改"><a href="#3-修改" class="headerlink" title="3. 修改"></a>3. 修改</h2><h4 id="3-1-修改数据记录"><a href="#3-1-修改数据记录" class="headerlink" title="3.1 修改数据记录"></a>3.1 修改数据记录</h4><h5 id="语法：-1"><a href="#语法：-1" class="headerlink" title="语法："></a>语法：</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">update table_name set column=new_value where condition</span><br><span class="line">update table_name set column1=new_value1,column2=new_value2,... where condition</span><br></pre></td></tr></table></figure>

<h5 id="示例："><a href="#示例：" class="headerlink" title="示例："></a>示例：</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">update `users` set `regtime`=curdate() where `regtime` is null</span><br><span class="line">/* 一次修改多列 */</span><br><span class="line">update `users` set `name`=&apos;steven&apos;,`avatar`=&apos;http://cdn.awesome_app.com/path/to/xxx/steven.jpg&apos; where `id`=1</span><br></pre></td></tr></table></figure>

<h4 id="3-2-修改数据库字符集为-utf8"><a href="#3-2-修改数据库字符集为-utf8" class="headerlink" title="3.2 修改数据库字符集为 utf8"></a>3.2 修改数据库字符集为 utf8</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter database `awesome_app` default character set utf8</span><br></pre></td></tr></table></figure>

<h4 id="3-3-修改表字符集为-utf8"><a href="#3-3-修改表字符集为-utf8" class="headerlink" title="3.3 修改表字符集为 utf8"></a>3.3 修改表字符集为 utf8</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter table `users` convert to character set utf8</span><br></pre></td></tr></table></figure>

<h4 id="3-4-修改表字段字符集为-utf8"><a href="#3-4-修改表字段字符集为-utf8" class="headerlink" title="3.4 修改表字段字符集为 utf8"></a>3.4 修改表字段字符集为 utf8</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter table `users` modify `name` char(10) character set utf8</span><br></pre></td></tr></table></figure>

<h4 id="3-5-修改字段类型"><a href="#3-5-修改字段类型" class="headerlink" title="3.5 修改字段类型"></a>3.5 修改字段类型</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter table `users` modify `regtime` datetime not null</span><br></pre></td></tr></table></figure>

<h4 id="3-6-修改字段默认值"><a href="#3-6-修改字段默认值" class="headerlink" title="3.6 修改字段默认值"></a>3.6 修改字段默认值</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">alter table `users` alter `regtime` set default &apos;2019-10-12 00:00:00&apos;</span><br><span class="line">/* 设置默认为当前时间 current_timestamp，需要重新定义整个列 */</span><br><span class="line">alter table `users` modify `regtime` datetime not null default current_timestamp</span><br></pre></td></tr></table></figure>

<h4 id="3-7-修改字段注释"><a href="#3-7-修改字段注释" class="headerlink" title="3.7 修改字段注释"></a>3.7 修改字段注释</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">alter table `users` modify `id` int not null auto_increment comment &apos;用户ID&apos;;</span><br><span class="line">alter table `users` modify `name` char(10) comment &apos;用户名&apos;;</span><br><span class="line">alter table `users` modify `avatar` varchar(300) comment &apos;用户头像&apos;;</span><br><span class="line">alter table `users` modify `regtime` datetime not null default current_timestamp comment &apos;注册时间&apos;;</span><br><span class="line">复制代码修改后，查看改动后的列：</span><br><span class="line">mysql&gt; show full columns from users;</span><br><span class="line">+---------+--------------+-----------------+------+-----+-------------------+----------------+---------------------------------+--------------+</span><br><span class="line">| Field   | Type         | Collation       | Null | Key | Default           | Extra          | Privileges                      | Comment      |</span><br><span class="line">+---------+--------------+-----------------+------+-----+-------------------+----------------+---------------------------------+--------------+</span><br><span class="line">| id      | int(11)      | NULL            | NO   | PRI | NULL              | auto_increment | select,insert,update,references | 用户ID       |</span><br><span class="line">| name    | char(10)     | utf8_general_ci | YES  |     | NULL              |                | select,insert,update,references | 用户名       |</span><br><span class="line">| avatar  | varchar(300) | utf8_general_ci | YES  |     | NULL              |                | select,insert,update,references | 用户头像     |</span><br><span class="line">| regtime | datetime     | NULL            | NO   |     | CURRENT_TIMESTAMP |                | select,insert,update,references | 注册时间     |</span><br><span class="line">+---------+--------------+-----------------+------+-----+-------------------+----------------+---------------------------------+--------------+</span><br></pre></td></tr></table></figure>

<h2 id="4-删除"><a href="#4-删除" class="headerlink" title="4. 删除"></a>4. 删除</h2><h4 id="4-1-删除数据记录"><a href="#4-1-删除数据记录" class="headerlink" title="4.1 删除数据记录"></a>4.1 删除数据记录</h4><h5 id="语法：delete-from-table-name-where-condition"><a href="#语法：delete-from-table-name-where-condition" class="headerlink" title="语法：delete from table_name where condition"></a>语法：<code>delete from table_name where condition</code></h5><h5 id="示例：删除用户名未填写的用户"><a href="#示例：删除用户名未填写的用户" class="headerlink" title="示例：删除用户名未填写的用户"></a>示例：删除用户名未填写的用户</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"># 先增加一条用户名为空的用户</span><br><span class="line">mysql&gt; insert into `users` (`regtime`) values (curdate());</span><br><span class="line">mysql&gt; select * from users;</span><br><span class="line">+----+--------+----------------------------------------------------+------------+</span><br><span class="line">| id | name   | avatar                                             | regtime    |</span><br><span class="line">+----+--------+----------------------------------------------------+------------+</span><br><span class="line">|  1 | steven | http://cdn.awesome_app.com/path/to/xxx/steven.jpg  | 2019-10-12 |</span><br><span class="line">|  2 | bill   | http://cdn.awesome_app.com/path/to/xxx/avatar2.jpg | 2019-10-12 |</span><br><span class="line">|  3 | NULL   | NULL                                               | 2019-10-12 |</span><br><span class="line">+----+--------+----------------------------------------------------+------------+</span><br><span class="line"># 删除用户名为空的行</span><br><span class="line">mysql&gt; delete from `users` where `name` is null;</span><br><span class="line">mysql&gt; select * from users;</span><br><span class="line">+----+--------+----------------------------------------------------+------------+</span><br><span class="line">| id | name   | avatar                                             | regtime    |</span><br><span class="line">+----+--------+----------------------------------------------------+------------+</span><br><span class="line">|  1 | steven | http://cdn.awesome_app.com/path/to/xxx/steven.jpg  | 2019-10-12 |</span><br><span class="line">|  2 | bill   | http://cdn.awesome_app.com/path/to/xxx/avatar2.jpg | 2019-10-12 |</span><br><span class="line">+----+--------+----------------------------------------------------+------------+</span><br></pre></td></tr></table></figure>

<h4 id="4-2-删除数据库"><a href="#4-2-删除数据库" class="headerlink" title="4.2 删除数据库"></a>4.2 删除数据库</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">drop database if exists `awesome_app`</span><br></pre></td></tr></table></figure>

<h4 id="4-3-删除表"><a href="#4-3-删除表" class="headerlink" title="4.3 删除表"></a>4.3 删除表</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">drop table if exists `users`</span><br></pre></td></tr></table></figure>

<h4 id="4-4-清空表中所有数据"><a href="#4-4-清空表中所有数据" class="headerlink" title="4.4 清空表中所有数据"></a>4.4 清空表中所有数据</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">这个操作相当于先 drop table 再 create table ，因此需要有 drop 权限。</span><br><span class="line">truncate table `users`</span><br></pre></td></tr></table></figure>

<h4 id="4-5-删除索引"><a href="#4-5-删除索引" class="headerlink" title="4.5 删除索引"></a>4.5 删除索引</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">drop index `idx_id` on `users`</span><br></pre></td></tr></table></figure>

<h2 id="5-查询"><a href="#5-查询" class="headerlink" title="5. 查询"></a>5. 查询</h2><h4 id="5-1-语法"><a href="#5-1-语法" class="headerlink" title="5.1 语法"></a>5.1 语法</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">SELECT</span><br><span class="line">    [ALL | DISTINCT | DISTINCTROW ]</span><br><span class="line">      [HIGH_PRIORITY]</span><br><span class="line">      [STRAIGHT_JOIN]</span><br><span class="line">      [SQL_SMALL_RESULT] [SQL_BIG_RESULT] [SQL_BUFFER_RESULT]</span><br><span class="line">      [SQL_CACHE | SQL_NO_CACHE] [SQL_CALC_FOUND_ROWS]</span><br><span class="line">    select_expr [, select_expr ...]</span><br><span class="line">    [FROM table_references</span><br><span class="line">      [PARTITION partition_list]</span><br><span class="line">    [WHERE where_condition]</span><br><span class="line">    [GROUP BY &#123;col_name | expr | position&#125;</span><br><span class="line">      [ASC | DESC], ... [WITH ROLLUP]]</span><br><span class="line">    [HAVING where_condition]</span><br><span class="line">    [ORDER BY &#123;col_name | expr | position&#125;</span><br><span class="line">      [ASC | DESC], ...]</span><br><span class="line">    [LIMIT &#123;[offset,] row_count | row_count OFFSET offset&#125;]</span><br><span class="line">    [PROCEDURE procedure_name(argument_list)]</span><br><span class="line">    [INTO OUTFILE &apos;file_name&apos;</span><br><span class="line">        [CHARACTER SET charset_name]</span><br><span class="line">        export_options</span><br><span class="line">      | INTO DUMPFILE &apos;file_name&apos;</span><br><span class="line">      | INTO var_name [, var_name]]</span><br><span class="line">    [FOR UPDATE | LOCK IN SHARE MODE]]</span><br></pre></td></tr></table></figure>

<h4 id="5-2-单表查询"><a href="#5-2-单表查询" class="headerlink" title="5.2 单表查询"></a>5.2 单表查询</h4><h5 id="5-2-1-准备数据："><a href="#5-2-1-准备数据：" class="headerlink" title="5.2.1 准备数据："></a>5.2.1 准备数据：</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">insert into users (`name`, `avatar`) values</span><br><span class="line">(&apos;张三&apos;, &apos;http://cdn.awesome_app.com/path/to/xxx/3.jpg&apos;),</span><br><span class="line">(&apos;李四&apos;, &apos;http://cdn.awesome_app.com/path/to/xxx/4.jpg&apos;),</span><br><span class="line">(&apos;王五&apos;, &apos;http://cdn.awesome_app.com/path/to/xxx/5.jpg&apos;),</span><br><span class="line">(&apos;马六&apos;, &apos;http://cdn.awesome_app.com/path/to/xxx/6.jpg&apos;),</span><br><span class="line">(&apos;肖七&apos;, &apos;http://cdn.awesome_app.com/path/to/xxx/7.jpg&apos;),</span><br><span class="line">(&apos;刘八&apos;, &apos;http://cdn.awesome_app.com/path/to/xxx/8.jpg&apos;),</span><br><span class="line">(&apos;杨九&apos;, &apos;http://cdn.awesome_app.com/path/to/xxx/9.jpg&apos;),</span><br><span class="line">(&apos;郑十&apos;, &apos;http://cdn.awesome_app.com/path/to/xxx/10.jpg&apos;);</span><br><span class="line"></span><br><span class="line">/* 增加重复行 */</span><br><span class="line">insert into users (`name`, `avatar`) values</span><br><span class="line">(&apos;张三&apos;, &apos;http://cdn.awesome_app.com/path/to/xxx/3.jpg&apos;),</span><br><span class="line">(&apos;李四&apos;, &apos;http://cdn.awesome_app.com/path/to/xxx/4.jpg&apos;),</span><br><span class="line">(&apos;王五&apos;, &apos;http://cdn.awesome_app.com/path/to/xxx/5.jpg&apos;);</span><br></pre></td></tr></table></figure>

<h5 id="5-2-2-查询所有列"><a href="#5-2-2-查询所有列" class="headerlink" title="5.2.2 查询所有列"></a>5.2.2 查询所有列</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from users;</span><br><span class="line">+----+--------+----------------------------------------------------+---------------------+</span><br><span class="line">| id | name   | avatar                                             | regtime             |</span><br><span class="line">+----+--------+----------------------------------------------------+---------------------+</span><br><span class="line">|  1 | steven | http://cdn.awesome_app.com/path/to/xxx/steven.jpg  | 2019-10-12 00:00:00 |</span><br><span class="line">|  2 | bill   | http://cdn.awesome_app.com/path/to/xxx/avatar2.jpg | 2019-10-12 00:00:00 |</span><br><span class="line">|  3 | 张三   | http://cdn.awesome_app.com/path/to/xxx/3.jpg       | 2019-10-13 10:58:37 |</span><br><span class="line">|  4 | 李四   | http://cdn.awesome_app.com/path/to/xxx/4.jpg       | 2019-10-13 10:58:37 |</span><br><span class="line">|  5 | 王五   | http://cdn.awesome_app.com/path/to/xxx/5.jpg       | 2019-10-13 10:58:37 |</span><br><span class="line">|  6 | 马六   | http://cdn.awesome_app.com/path/to/xxx/6.jpg       | 2019-10-13 10:58:37 |</span><br><span class="line">|  7 | 肖七   | http://cdn.awesome_app.com/path/to/xxx/7.jpg       | 2019-10-13 10:58:37 |</span><br><span class="line">|  8 | 刘八   | http://cdn.awesome_app.com/path/to/xxx/8.jpg       | 2019-10-13 10:58:37 |</span><br><span class="line">|  9 | 杨九   | http://cdn.awesome_app.com/path/to/xxx/9.jpg       | 2019-10-13 10:58:37 |</span><br><span class="line">| 10 | 郑十   | http://cdn.awesome_app.com/path/to/xxx/10.jpg      | 2019-10-13 10:58:37 |</span><br><span class="line">| 11 | 张三   | http://cdn.awesome_app.com/path/to/xxx/3.jpg       | 2019-10-13 11:20:17 |</span><br><span class="line">| 12 | 李四   | http://cdn.awesome_app.com/path/to/xxx/4.jpg       | 2019-10-13 11:20:17 |</span><br><span class="line">| 13 | 王五   | http://cdn.awesome_app.com/path/to/xxx/5.jpg       | 2019-10-13 11:20:17 |</span><br><span class="line">+----+--------+----------------------------------------------------+---------------------+</span><br></pre></td></tr></table></figure>

<h5 id="5-2-3-查询指定列"><a href="#5-2-3-查询指定列" class="headerlink" title="5.2.3 查询指定列"></a>5.2.3 查询指定列</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select id,name from users;</span><br><span class="line">+----+--------+</span><br><span class="line">| id | name   |</span><br><span class="line">+----+--------+</span><br><span class="line">|  1 | steven |</span><br><span class="line">|  2 | bill   |</span><br><span class="line">|  3 | 张三   |</span><br><span class="line">|  4 | 李四   |</span><br><span class="line">|  5 | 王五   |</span><br><span class="line">|  6 | 马六   |</span><br><span class="line">|  7 | 肖七   |</span><br><span class="line">|  8 | 刘八   |</span><br><span class="line">|  9 | 杨九   |</span><br><span class="line">| 10 | 郑十   |</span><br><span class="line">| 11 | 张三   |</span><br><span class="line">| 12 | 李四   |</span><br><span class="line">| 13 | 王五   |</span><br><span class="line">+----+--------+</span><br></pre></td></tr></table></figure>

<h5 id="5-2-4-查询不重复记录"><a href="#5-2-4-查询不重复记录" class="headerlink" title="5.2.4 查询不重复记录"></a>5.2.4 查询不重复记录</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select distinct name,avatar  from users;</span><br><span class="line">+--------+----------------------------------------------------+</span><br><span class="line">| name   | avatar                                             |</span><br><span class="line">+--------+----------------------------------------------------+</span><br><span class="line">| steven | http://cdn.awesome_app.com/path/to/xxx/steven.jpg  |</span><br><span class="line">| bill   | http://cdn.awesome_app.com/path/to/xxx/avatar2.jpg |</span><br><span class="line">| 张三   | http://cdn.awesome_app.com/path/to/xxx/3.jpg       |</span><br><span class="line">| 李四   | http://cdn.awesome_app.com/path/to/xxx/4.jpg       |</span><br><span class="line">| 王五   | http://cdn.awesome_app.com/path/to/xxx/5.jpg       |</span><br><span class="line">| 马六   | http://cdn.awesome_app.com/path/to/xxx/6.jpg       |</span><br><span class="line">| 肖七   | http://cdn.awesome_app.com/path/to/xxx/7.jpg       |</span><br><span class="line">| 刘八   | http://cdn.awesome_app.com/path/to/xxx/8.jpg       |</span><br><span class="line">| 杨九   | http://cdn.awesome_app.com/path/to/xxx/9.jpg       |</span><br><span class="line">| 郑十   | http://cdn.awesome_app.com/path/to/xxx/10.jpg      |</span><br><span class="line">+--------+----------------------------------------------------+</span><br></pre></td></tr></table></figure>

<h5 id="5-2-5-限制查询行数"><a href="#5-2-5-限制查询行数" class="headerlink" title="5.2.5 限制查询行数"></a>5.2.5 限制查询行数</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">查询前几行</span><br><span class="line">mysql&gt; select id,name from users limit 2;</span><br><span class="line">+----+--------+</span><br><span class="line">| id | name   |</span><br><span class="line">+----+--------+</span><br><span class="line">|  1 | steven |</span><br><span class="line">|  2 | bill   |</span><br><span class="line">+----+--------+</span><br><span class="line">复制代码查询从指定偏移(第一行为偏移为0)开始的几行</span><br><span class="line">mysql&gt; select id,name from users limit 2,3;</span><br><span class="line">+----+--------+</span><br><span class="line">| id | name   |</span><br><span class="line">+----+--------+</span><br><span class="line">|  3 | 张三   |</span><br><span class="line">|  4 | 李四   |</span><br><span class="line">|  5 | 王五   |</span><br><span class="line">+----+--------+</span><br></pre></td></tr></table></figure>

<h5 id="5-2-6-排序"><a href="#5-2-6-排序" class="headerlink" title="5.2.6 排序"></a>5.2.6 排序</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"># 正序</span><br><span class="line">mysql&gt; select distinct name from users order by name asc limit 3;</span><br><span class="line">+--------+</span><br><span class="line">| name   |</span><br><span class="line">+--------+</span><br><span class="line">| bill   |</span><br><span class="line">| steven |</span><br><span class="line">| 刘八   |</span><br><span class="line">+--------+</span><br><span class="line"># 倒序</span><br><span class="line">mysql&gt; select id,name from users order by id desc limit 3;</span><br><span class="line">+----+--------+</span><br><span class="line">| id | name   |</span><br><span class="line">+----+--------+</span><br><span class="line">| 13 | 王五   |</span><br><span class="line">| 12 | 李四   |</span><br><span class="line">| 11 | 张三   |</span><br><span class="line">+----+--------+</span><br></pre></td></tr></table></figure>

<h5 id="5-2-7-分组"><a href="#5-2-7-分组" class="headerlink" title="5.2.7 分组"></a>5.2.7 分组</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">增加城市字段</span><br><span class="line">alter table `users` add `city` varchar(10) comment &apos;用户所在城市&apos; after `name`;</span><br><span class="line">update `users` set `city`=&apos;旧金山&apos; where `id`=1;</span><br><span class="line">update `users` set `city`=&apos;西雅图&apos; where `id`=2;</span><br><span class="line">update `users` set `city`=&apos;北京&apos; where `id` in (3,5,7);</span><br><span class="line">update `users` set `city`=&apos;上海&apos; where `id` in (4,6,8);</span><br><span class="line">update `users` set `city`=&apos;广州&apos; where `id` between 9 and 10;</span><br><span class="line">update `users` set `city`=&apos;深圳&apos; where `id` between 11 and 13;</span><br><span class="line">复制代码按城市分组统计用户数</span><br><span class="line">mysql&gt; select city, count(name) as num_of_user from users group by city;</span><br><span class="line">+-----------+-------------+</span><br><span class="line">| city      | num_of_user |</span><br><span class="line">+-----------+-------------+</span><br><span class="line">| 上海      |           3 |</span><br><span class="line">| 北京      |           3 |</span><br><span class="line">| 广州      |           2 |</span><br><span class="line">| 旧金山    |           1 |</span><br><span class="line">| 深圳      |           3 |</span><br><span class="line">| 西雅图    |           1 |</span><br><span class="line">+-----------+-------------+</span><br><span class="line">mysql&gt; select city, count(name) as num_of_user from users group by city having num_of_user=1;</span><br><span class="line">+-----------+-------------+</span><br><span class="line">| city      | num_of_user |</span><br><span class="line">+-----------+-------------+</span><br><span class="line">| 旧金山    |           1 |</span><br><span class="line">| 西雅图    |           1 |</span><br><span class="line">+-----------+-------------+</span><br><span class="line">mysql&gt; select city, count(name) as num_of_user from users group by city having num_of_user&gt;2;</span><br><span class="line">+--------+-------------+</span><br><span class="line">| city   | num_of_user |</span><br><span class="line">+--------+-------------+</span><br><span class="line">| 上海   |           3 |</span><br><span class="line">| 北京   |           3 |</span><br><span class="line">| 深圳   |           3 |</span><br><span class="line">+--------+-------------+</span><br></pre></td></tr></table></figure>

<h4 id="5-3-多表关联查询"><a href="#5-3-多表关联查询" class="headerlink" title="5.3 多表关联查询"></a>5.3 多表关联查询</h4><h5 id="5-3-1-准备数据"><a href="#5-3-1-准备数据" class="headerlink" title="5.3.1 准备数据"></a>5.3.1 准备数据</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">create table if not exists `orders`</span><br><span class="line">(</span><br><span class="line">    `id` int not null primary key auto_increment comment &apos;订单ID&apos;,</span><br><span class="line">    `title` varchar(50) not null comment &apos;订单标题&apos;,</span><br><span class="line">    `user_id` int not null comment &apos;用户ID&apos;,</span><br><span class="line">    `cretime` timestamp not null default current_timestamp comment &apos;创建时间&apos;</span><br><span class="line">);</span><br><span class="line">create table if not exists `groups`</span><br><span class="line">(</span><br><span class="line">    `id` int not null primary key auto_increment comment &apos;用户组ID&apos;,</span><br><span class="line">    `title` varchar(50) not null comment &apos;用户组标题&apos;,</span><br><span class="line">    `cretime` timestamp not null default current_timestamp comment &apos;创建时间&apos;</span><br><span class="line">);</span><br><span class="line">alter table `users` add `group_id` int comment &apos;用户分组&apos; after `city`;</span><br><span class="line"></span><br><span class="line">insert into `groups` (`title`) values (&apos;大佬&apos;), (&apos;萌新&apos;), (&apos;菜鸡&apos;);</span><br><span class="line">insert into `orders` (`title`, `user_id`) values (&apos;《大佬是怎样炼成的？》&apos;, 3), (&apos;《MySQL 从萌新到删库跑路》&apos;, 6), (&apos;《菜鸡踩坑记》&apos;, 9);</span><br><span class="line">update `users` set `group_id`=1 where `id` between 1 and 2;</span><br><span class="line">update `users` set `group_id`=2 where `id` in (4, 6, 8, 10, 12);</span><br><span class="line">update `users` set `group_id`=3 where `id` in (3, 5, 13);</span><br></pre></td></tr></table></figure>

<h5 id="5-3-2-join"><a href="#5-3-2-join" class="headerlink" title="5.3.2 join"></a>5.3.2 join</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">join</span><br><span class="line">用于在多个表中查询相互匹配的数据。</span><br><span class="line">mysql&gt; select `users`.`name` as `user_name`, `orders`.`title` as `order_title` from `users`, `orders` where `orders`.`user_id`=`users`.`id`;</span><br><span class="line">+-----------+--------------------------------------+</span><br><span class="line">| user_name | order_title                          |</span><br><span class="line">+-----------+--------------------------------------+</span><br><span class="line">| 张三      | 《大佬是怎样炼成的？》               |</span><br><span class="line">| 马六      | 《MySQL 从萌新到删库跑路》           |</span><br><span class="line">| 杨九      | 《菜鸡踩坑记》                       |</span><br><span class="line">+-----------+--------------------------------------+</span><br><span class="line">复制代码inner join</span><br><span class="line">内部连接。效果与 join 一样 , 但用法不同，join 使用 where ，inner join 使用 on 。</span><br><span class="line">mysql&gt; select `users`.`name` as `user_name`, `orders`.`title` as `order_title` from `users` inner join `orders` on `orders`.`user_id`=`users`.`id`;</span><br><span class="line">+-----------+--------------------------------------+</span><br><span class="line">| user_name | order_title                          |</span><br><span class="line">+-----------+--------------------------------------+</span><br><span class="line">| 张三      | 《大佬是怎样炼成的？》               |</span><br><span class="line">| 马六      | 《MySQL 从萌新到删库跑路》           |</span><br><span class="line">| 杨九      | 《菜鸡踩坑记》                       |</span><br><span class="line">+-----------+--------------------------------------+</span><br><span class="line">复制代码left join</span><br><span class="line">左连接。返回左表所有行，即使右表中没有匹配的行，不匹配的用 NULL 填充。</span><br><span class="line">mysql&gt; select `users`.`name` as `user_name`, `orders`.`title` as `order_title` from `users` left join `orders` on `orders`.`user_id`=`users`.`id`;</span><br><span class="line">+-----------+--------------------------------------+</span><br><span class="line">| user_name | order_title                          |</span><br><span class="line">+-----------+--------------------------------------+</span><br><span class="line">| 张三      | 《大佬是怎样炼成的？》               |</span><br><span class="line">| 马六      | 《MySQL 从萌新到删库跑路》           |</span><br><span class="line">| 杨九      | 《菜鸡踩坑记》                       |</span><br><span class="line">| steven    | NULL                                 |</span><br><span class="line">| bill      | NULL                                 |</span><br><span class="line">| 李四      | NULL                                 |</span><br><span class="line">| 王五      | NULL                                 |</span><br><span class="line">| 肖七      | NULL                                 |</span><br><span class="line">| 刘八      | NULL                                 |</span><br><span class="line">| 郑十      | NULL                                 |</span><br><span class="line">| 张三      | NULL                                 |</span><br><span class="line">| 李四      | NULL                                 |</span><br><span class="line">| 王五      | NULL                                 |</span><br><span class="line">+-----------+--------------------------------------+</span><br><span class="line">复制代码right join</span><br><span class="line">右连接。和 left join 正好相反，会返回右表所有行，即使左表中没有匹配的行，不匹配的用 NULL 填充。</span><br><span class="line">mysql&gt; select `groups`.`title` as `group_title`, `users`.`name` as `user_name` from `groups` right join `users` on `users`.`group_id`=`groups`.`id`;</span><br><span class="line">+-------------+-----------+</span><br><span class="line">| group_title | user_name |</span><br><span class="line">+-------------+-----------+</span><br><span class="line">| 大佬        | steven    |</span><br><span class="line">| 大佬        | bill      |</span><br><span class="line">| 萌新        | 李四      |</span><br><span class="line">| 萌新        | 马六      |</span><br><span class="line">| 萌新        | 刘八      |</span><br><span class="line">| 萌新        | 郑十      |</span><br><span class="line">| 萌新        | 李四      |</span><br><span class="line">| 菜鸡        | 张三      |</span><br><span class="line">| 菜鸡        | 王五      |</span><br><span class="line">| 菜鸡        | 王五      |</span><br><span class="line">| NULL        | 肖七      |</span><br><span class="line">| NULL        | 杨九      |</span><br><span class="line">| NULL        | 张三      |</span><br><span class="line">+-------------+-----------+</span><br></pre></td></tr></table></figure>

<h5 id="5-3-3-union"><a href="#5-3-3-union" class="headerlink" title="5.3.3 union"></a>5.3.3 union</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">union 用于合并两个或多个查询结果，合并的查询结果必须具有相同数量的列，并且列拥有形似的数据类型，同时列的顺序相同。</span><br><span class="line">mysql&gt; (select `id`, `title` from `groups`) union (select `id`, `title` from `orders`);</span><br><span class="line">+----+--------------------------------------+</span><br><span class="line">| id | title                                |</span><br><span class="line">+----+--------------------------------------+</span><br><span class="line">|  1 | 大佬                                 |</span><br><span class="line">|  2 | 萌新                                 |</span><br><span class="line">|  3 | 菜鸡                                 |</span><br><span class="line">|  1 | 《大佬是怎样炼成的？》               |</span><br><span class="line">|  2 | 《MySQL 从萌新到删库跑路》           |</span><br><span class="line">|  3 | 《菜鸡踩坑记》                       |</span><br><span class="line">+----+--------------------------------------+</span><br></pre></td></tr></table></figure>

<h2 id="6-函数"><a href="#6-函数" class="headerlink" title="6. 函数"></a>6. 函数</h2><h4 id="6-1-语法"><a href="#6-1-语法" class="headerlink" title="6.1 语法"></a>6.1 语法</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select function(column) from table_name</span><br></pre></td></tr></table></figure>

<h4 id="6-2-合计函数（Aggregate-functions）"><a href="#6-2-合计函数（Aggregate-functions）" class="headerlink" title="6.2 合计函数（Aggregate functions）"></a>6.2 合计函数（Aggregate functions）</h4><blockquote>
<p>合计函数的操作面向一系列的值，并返回一个单一的值。通常与 group by 语句一起用。</p>
</blockquote>
<table>
<thead>
<tr>
<th>函数</th>
<th align="right">描述</th>
</tr>
</thead>
<tbody><tr>
<td>avg(column)</td>
<td align="right">返回某列的平均值</td>
</tr>
<tr>
<td>count(column)</td>
<td align="right">返回某列的行数（不包括 NULL 值）</td>
</tr>
<tr>
<td>count(*)</td>
<td align="right">返回被选行数</td>
</tr>
<tr>
<td>first(column)</td>
<td align="right">返回在指定的域中第一个记录的值</td>
</tr>
<tr>
<td>last(column)</td>
<td align="right">返回在指定的域中最后一个记录的值</td>
</tr>
<tr>
<td>max(column)</td>
<td align="right">返回某列的最高值</td>
</tr>
<tr>
<td>min(column)</td>
<td align="right">返回某列的最低值</td>
</tr>
<tr>
<td>sum(column)</td>
<td align="right">返回某列的总和</td>
</tr>
</tbody></table>
<h4 id="6-3-标量函数（Scalar-functions）"><a href="#6-3-标量函数（Scalar-functions）" class="headerlink" title="6.3 标量函数（Scalar functions）"></a>6.3 标量函数（Scalar functions）</h4><table>
<thead>
<tr>
<th>函数</th>
<th align="right">描述</th>
</tr>
</thead>
<tbody><tr>
<td>ucase(c)</td>
<td align="right">转换为大写</td>
</tr>
<tr>
<td>lcase(c)</td>
<td align="right">转换为小写</td>
</tr>
<tr>
<td>mid(c, start[, end])</td>
<td align="right">从文本提取字符</td>
</tr>
<tr>
<td>len(c)</td>
<td align="right">返回文本长度</td>
</tr>
<tr>
<td>instr(c, char)</td>
<td align="right">返回在文本中指定字符的数值位置</td>
</tr>
<tr>
<td>left(c, number_of_char)</td>
<td align="right">返回文本的左侧部分</td>
</tr>
<tr>
<td>right(c, number_of_char)</td>
<td align="right">返回文本的右侧部分</td>
</tr>
<tr>
<td>round(c, decimals)</td>
<td align="right">对数值指定小数位数四舍五入</td>
</tr>
<tr>
<td>mod(x, y)</td>
<td align="right">取余（求模）</td>
</tr>
<tr>
<td>now()</td>
<td align="right">返回当前的系统日期</td>
</tr>
<tr>
<td>format(c, format)</td>
<td align="right">格式化显示</td>
</tr>
<tr>
<td>datediff(d, date1, date2)</td>
<td align="right">日期计算</td>
</tr>
</tbody></table>
<p>链接：<a href="https://juejin.im/post/5da3ba17f265da5b591b6b09" target="_blank" rel="noopener">https://juejin.im/post/5da3ba17f265da5b591b6b09</a></p>

    </div>
</article>


                </div>
                <aside class="col-md-4 gal-left" id="sidebar">
    <!-- 此为sidebar的搜索框, 非搜索结果页面 -->
<aside id="sidebar-search">
    <div class="search hidden-xs" data-aos="fade-up" data-aos-duration="2000">
        <form class="form-inline clearfix" id="search-form" method="get" action="/search/index.html">
            <input type="text" name="s" class="form-control" id="searchInput" placeholder="搜索文章~" autocomplete="off">
            <button class="btn btn-danger btn-gal" type="submit">
                <i class="fa fa-search"></i>
            </button>
        </form>
    </div>
</aside>
    <aside id="sidebar-author">
    <div class="panel panel-gal" data-aos="flip-right" data-aos-duration="3000">
        <div class="panel-heading" style="text-align: center">
            <i class="fa fa-quote-left"></i>
            明明～
            <i class="fa fa-quote-right"></i>
        </div>
        <div class="author-panel text-center">
            <img src="/imgs/avatar.jpg" width="140" height="140" alt="个人头像" class="author-image">
            <p class="author-description"></p><p>Zming-ming</p>
<p></p>
        </div>
    </div>
</aside>
    
    <!-- 要配置好leancloud才能开启此小工具 -->
    
    <aside id="sidebar-hot_posts">
    <div class="panel panel-gal hot hidden-xs" data-aos="fade-up" data-aos-duration="2000">
        <div class="panel-heading">
            <i class="fa fa-fire"></i>
            最热文章
            <i class="fa fa-times-circle panel-remove"></i>
            <i class="fa fa-chevron-circle-up panel-toggle"></i>
        </div>
        <ul class="list-group list-group-flush"></ul>
    </div>
</aside>
    
    
    <aside id="sidebar-recent_posts">
    <div class="panel panel-gal recent hidden-xs" data-aos="fade-up" data-aos-duration="2000">
        <div class="panel-heading">
            <i class="fa fa-refresh"></i>
            近期文章
            <i class="fa fa-times-circle panel-remove"></i>
            <i class="fa fa-chevron-circle-up panel-toggle"></i>
        </div>
        <ul class="list-group list-group-flush">
            
            <li class="list-group-item">
                <span class="post-title">
                    <a href="/2019/10/15/实用-SQL-语句/">实用 SQL 语句</a>
                </span>
            </li>
            
            <li class="list-group-item">
                <span class="post-title">
                    <a href="/2019/09/20/25-个-Linux-下最炫酷又强大的命令行神器/">25 个 Linux 下最炫酷又强大的命令行神器</a>
                </span>
            </li>
            
            <li class="list-group-item">
                <span class="post-title">
                    <a href="/2019/09/18/一千行MySQL命令/">一千行MySQL命令</a>
                </span>
            </li>
            
            <li class="list-group-item">
                <span class="post-title">
                    <a href="/2019/09/17/后端必备-Nginx-配置/">后端必备 Nginx 配置</a>
                </span>
            </li>
            
            <li class="list-group-item">
                <span class="post-title">
                    <a href="/2019/06/29/PHP面试（一）/">PHP面试（一）</a>
                </span>
            </li>
            
            <li class="list-group-item">
                <span class="post-title">
                    <a href="/2019/06/29/phpstorm快捷键/">phpstorm快捷键</a>
                </span>
            </li>
            
            <li class="list-group-item">
                <span class="post-title">
                    <a href="/2018/11/23/MySQL-函数/">MySQL 函数</a>
                </span>
            </li>
            
            <li class="list-group-item">
                <span class="post-title">
                    <a href="/2018/11/02/Linux-守护进程的启动方法/">Linux 守护进程的启动方法</a>
                </span>
            </li>
            
            <li class="list-group-item">
                <span class="post-title">
                    <a href="/2018/11/02/常用-Git-命令清单/">常用 Git 命令清单</a>
                </span>
            </li>
            
            <li class="list-group-item">
                <span class="post-title">
                    <a href="/2018/10/30/基于个推（GeTui）官方SDK集成-Laravel-5/">基于个推（GeTui）官方SDK集成 Laravel 5.* </a>
                </span>
            </li>
            
        </ul>
    </div>
</aside>
    
    
    <aside id="sidebar-rand_posts">
    <div class="panel panel-gal recent hidden-xs" data-aos="fade-up" data-aos-duration="2000">
        <div class="panel-heading">
            <i class="fa fa-refresh"></i>
            随机文章
            <i class="fa fa-times-circle panel-remove"></i>
            <i class="fa fa-chevron-circle-up panel-toggle"></i>
        </div>
        <ul class="list-group list-group-flush">
            
            
            <li class="list-group-item">
                <span class="post-title">
                    <a href="/2018/09/21/Markdown-语法/">Markdown 语法</a>
                </span>
            </li>
            
            <li class="list-group-item">
                <span class="post-title">
                    <a href="/2018/09/17/npm启动内存溢出问题/">npm启动内存溢出问题</a>
                </span>
            </li>
            
            <li class="list-group-item">
                <span class="post-title">
                    <a href="/2018/08/24/冒泡排序/">php中常用的冒泡排序&amp;快速排序算法以及二分查找&amp;顺序查找的算法实现</a>
                </span>
            </li>
            
            <li class="list-group-item">
                <span class="post-title">
                    <a href="/2018/11/02/常用-Git-命令清单/">常用 Git 命令清单</a>
                </span>
            </li>
            
            <li class="list-group-item">
                <span class="post-title">
                    <a href="/2018/10/17/微信小程序的更新机制/">微信小程序的更新机制</a>
                </span>
            </li>
            
            <li class="list-group-item">
                <span class="post-title">
                    <a href="/2018/11/02/Linux-守护进程的启动方法/">Linux 守护进程的启动方法</a>
                </span>
            </li>
            
            <li class="list-group-item">
                <span class="post-title">
                    <a href="/2018/08/25/laravel-Valet安装使用教程/">Valet 安装使用详细教程</a>
                </span>
            </li>
            
            <li class="list-group-item">
                <span class="post-title">
                    <a href="/2019/06/29/phpstorm快捷键/">phpstorm快捷键</a>
                </span>
            </li>
            
            <li class="list-group-item">
                <span class="post-title">
                    <a href="/2019/10/15/实用-SQL-语句/">实用 SQL 语句</a>
                </span>
            </li>
            
            <li class="list-group-item">
                <span class="post-title">
                    <a href="/2018/09/13/MySql函数字典/">MySql函数字典</a>
                </span>
            </li>
            
        </ul>
    </div>
</aside>
    
    
    <aside id="gal-sets">
        <div class="panel panel-gal hidden-xs" data-aos="fade-up" data-aos-duration="2000">
            <ul class="nav nav-pills pills-gal">

                
                <li>
                    <a href="/2019/10/15/实用-SQL-语句/index.html#sidebar-tags" data-toggle="tab" id="tags-tab">热门标签</a>
                </li>
                
                
                <li>
                    <a href="/2019/10/15/实用-SQL-语句/index.html#sidebar-friend-links" data-toggle="tab" id="friend-links-tab">友情链接</a>
                </li>
                
                
                <li>
                    <a href="/2019/10/15/实用-SQL-语句/index.html#sidebar-links" data-toggle="tab" id="links-tab">个人链接</a>
                </li>
                
            </ul>
            <div class="tab-content">
                
                <div class="cloud-tags tab-pane nav bs-sidenav fade" id="sidebar-tags">
    
    <a href="/tags/Excel/" style="font-size: 13.318858350139566px;" class="tag-cloud-link">Excel</a>
    
    <a href="/tags/Laravel/" style="font-size: 14.332566941312345px;" class="tag-cloud-link">Laravel</a>
    
    <a href="/tags/markdown/" style="font-size: 19.963162914982874px;" class="tag-cloud-link">markdown</a>
    
    <a href="/tags/Linux/" style="font-size: 15.161200096059275px;" class="tag-cloud-link">Linux</a>
    
    <a href="/tags/定时任务/" style="font-size: 19.519886637454064px;" class="tag-cloud-link">定时任务</a>
    
    <a href="/tags/npm/" style="font-size: 11.205958109814398px;" class="tag-cloud-link">npm</a>
    
    <a href="/tags/vue/" style="font-size: 10.152688192764828px;" class="tag-cloud-link">vue</a>
    
    <a href="/tags/PHP/" style="font-size: 8.517640719452341px;" class="tag-cloud-link">PHP</a>
    
    <a href="/tags/GIT/" style="font-size: 8.362771759555134px;" class="tag-cloud-link">GIT</a>
    
    <a href="/tags/小程序/" style="font-size: 15.902540628263985px;" class="tag-cloud-link">小程序</a>
    
    <a href="/tags/GeTui/" style="font-size: 14.954113704079251px;" class="tag-cloud-link">GeTui</a>
    
    <a href="/tags/composer/" style="font-size: 15.62222885609829px;" class="tag-cloud-link">composer</a>
    
    <a href="/tags/支付/" style="font-size: 18.38082148648223px;" class="tag-cloud-link">支付</a>
    
    <a href="/tags/Redis/" style="font-size: 18.701841812701492px;" class="tag-cloud-link">Redis</a>
    
    <a href="/tags/MySql/" style="font-size: 13.415099046791909px;" class="tag-cloud-link">MySql</a>
    
</div>
                
                
                <div class="friend-links tab-pane nav bs-sidenav fade" id="sidebar-friend-links">
    
    <li>
        <a href="http://kdays.net/days/" target="_blank">KDays Forum</a>
    </li>
    
    <li>
        <a href="http://www.gal123.com/" target="_blank">绅士导航♂</a>
    </li>
    
    <li>
        <a href="http://www.moe123.com/" target="_blank">萌导航</a>
    </li>
    
</div>
                
                
                <div class="links tab-pane nav bs-sidenav fade" id="sidebar-links">
    
    <li>
        <a href="https://github.com/Zming-ming/" target="_blank">Github</a>
    </li>
    
    <li>
        <a href="https://coding.net/u/SORA1" target="_blank">Coding</a>
    </li>
    
    <li>
        <a href="https://www.zhihu.com/people/aonosora/activities" target="_blank">知乎</a>
    </li>
    
</div>
                
            </div>
        </div>
    </aside>
    
</aside>
            </div>
        </div>
    </div>
    <footer id="gal-footer">
    <div class="container">
        Copyright © 2018 明明～ Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>.&nbsp;Theme by <a href="https://github.com/ZEROKISEKI" target="_blank">AONOSORA</a>
    </div>
</footer>

<!-- 回到顶端 -->
<div id="gal-gotop">
    <i class="fa fa-angle-up"></i>
</div>
<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/hibiki.model.json"},"display":{"position":"right","width":150,"height":350},"mobile":{"show":true},"log":false});</script></body>
<script src="/js/activate-power-mode.js"></script>
<script>

    // 配置highslide
	hs.graphicsDir = '/js/highslide/graphics/'
    hs.outlineType = "rounded-white";
    hs.dimmingOpacity = 0.8;
    hs.outlineWhileAnimating = true;
    hs.showCredits = false;
    hs.captionEval = "this.thumb.alt";
    hs.numberPosition = "caption";
    hs.align = "center";
    hs.transitions = ["expand", "crossfade"];
    hs.lang.number = '共%2张图, 当前是第%1张';
    hs.addSlideshow({
      interval: 5000,
      repeat: true,
      useControls: true,
      fixedControls: "fit",
      overlayOptions: {
        opacity: 0.75,
        position: "bottom center",
        hideOnMouseOut: true
      }
    })

    // 初始化aos
    AOS.init({
      duration: 1000,
      delay: 0,
      easing: 'ease-out-back'
    });

</script>
<script>
	POWERMODE.colorful = 'true';    // make power mode colorful
	POWERMODE.shake = 'true';       // turn off shake
	// TODO 这里根据具体情况修改
	document.body.addEventListener('input', POWERMODE);
</script>
<script>
    window.slideConfig = {
      prefix: '/imgs/slide/background',
      ext: 'jpg',
      maxCount: '6'
    }
</script>
<script src="/js/hs.js"></script>
<script src="/js/blog.js"></script>

<script src="/js/oni.js"></script>


<script>
    window.hot_posts_count = '10'
    // window.use_leancloud = 'true'
</script>
<script src="/js/comment/leancloud.js"></script>


</html>